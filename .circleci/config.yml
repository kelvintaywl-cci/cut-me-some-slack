version: 2.1

orbs:
  circleci-cli: circleci/circleci-cli@0.1.9

jobs:
  cli:
    docker:
      - image: cimg/go:1.18-node
    steps:
      - circleci-cli/install
      - run:
          name: test CLI
          command: |
            which circleci
      - checkout
      - run:
          name: validate CI config
          command: |
            # will exit 1 with the following error:
            #   Error: Configuration version 2.1 requires the "Enable Pipelines" project setting. Enable pipelines under Project Settings -> Advanced Settings. In order to retrigger pipelines, you must push a new commit.
            circleci config validate

workflows:
  main:
    jobs:
      - cli
